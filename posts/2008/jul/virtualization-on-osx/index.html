<p>I'm about to go on the road again and I've been getting my laptop updated to make sure I can function without internet access.  For me that  means that I need a linux environment.  I've been using Parallels for this because it was the only option when I first got my macbook, and I'm not terribly impressed with its ability to run linux virtual machines.</p><p>First I have to say that my preferred usage for vms is to disable as much graphical UI as possible and login using the terminal; I want to avoid any excess resource usage because I'm on a laptop and I want better battery life.<br /></p><p>Here's my gripe list:</p><ul><li>poweroff spins the cpus up to 100% or more utilization and doesn't actually power the machine off.<br />The reason?  <a href="http://forum.parallels.com/showpost.php?p=78841&amp;postcount=6">ACPI is only supported for vista guests</a>.   I'm rather bemused by this statement, because the whole point of ACPI is to virtualize certain types of hardware access--it should not be targeted to a particular OS.</li><li>Parallels Tools requires X to run.<br />You can manually run the daemon but it spins the CPU trying to open the display.  This means that you can't get time synchronization with the host unless you want to load your CPU</li><li>Shared folder performance sucks<br />Mounting the host filesystem over NFS is faster, but kernel panics OSX (the latter is probably an OSX bug)</li></ul>Outside of these issues, it's not bad though.  I'm rather disappointed about the level of Linux support from Parallels--I had all the same problems a year ago and nothing seems to have changed.  It's clear that their priority is in making the Windows VM experience nice and integrated, and that's their perogative.<br /><br />I've also tried VMWare Fusion, both the current stable and the beta versions; here's my gripe list:<br /><ul><li>lvm and vmware fusion appear to not like each other.<br />Sometimes on reboot the vm filesystem is corrupt, especially the rpm database, and the image needs to be tossed and reinstalled without lvm.  This is problematic because the default install for centos is lvm based.<br /></li><li>vmware fusion freezes and can't be killed, can't be restarted.<br />The resolution is a reboot of the laptop, which isn't reliable--powercycling is required.</li></ul>I like vmware (I've been using it for many years), but it's not a happy camper on my laptop; I've uninstalled it.<br /><br />I've also tried VitualBox, and it's pretty good, but not perfect; gripes:<br /><ul><li>Only supports NAT networking, with no locally visible IP/network.<br />This means that I can't ssh into individual machines by IP and have to set up port forwarding to get into them from my terminal.</li><li>Setting up port fowarding requires 3 long and tedious command invocations for each port</li></ul>Some positives for VirtualBox:<br /><ul><li>ACPI support appears to be very complete<br />The GUI even allows you to distinguish between an ACPI power off request and yanking out the power cord</li><li>SATA controller emulation<br />This is faster than IDE/ATA emulation, which is all that Parallels offers.  VMWare offers SCSI as an option, but that's a non-starter for me currently.</li><li>You can run VirtualBox vms completely headless and optionally export the console display using Remote Desktop</li><li>It's free to download and run</li></ul>I'm sticking with Parallels for the time being; I think that VirtualBox might become my favourite once they've beefed up the networking support on OSX.<br /><br />I'll leave you with a couple of performance tips that should apply to any virtualization software:<br /><ul><li>Use fixed size virtual disks in preference to dynamically expanding disks.  This will improve filesystem performance</li><li>Linux kernels by default have a high timer frequency that can torture the emulation and cause it have higher CPU load.<br />If it makes sense for your vm, you can rebuild the kernel to use a lower frequency.<br />If you're using centos, <a href="http://vmware.xaox.net/centos/">grab one of these pre-compiled kernels</a> and reboot.<br />This resulted in a drop from 30% CPU utilization when idle to 7% for me in Parallels, and a less significant drop in VirtualBox.<br /></li></ul>