[{"i":"42b79bb7-b7a6-9295-4582-2b79bb78eb79","d":"2005-06-21 04:46:47","u":"anon","n":"lamer2000@hotmail.com","c":"<b>hacking<\/b><br\/>\n<p>Hi, I am trying to find a solution for fsockopen problem that is not involving any fancy libraries and patches. So far I got to the point where I am wrapping request to &quot;unsafe&quot; URL that can hangs into &quot;safe&quot; request to my own server that suppose to work. For example, I need to download &quot;unsafe&quot; x.html from my script y.php. Instead of downloading x.html directly, I load some z.php which is placed at my server so that by default it should not hangs, inside of z.php I am using set_time_limit to control execution time and then trying to download x.html and pass it outsite to y.php. In this scenario I can run as many as I want z.php's from x.php. And in most cases it works fine, but some servers seems to have restricion on how many sockets I can open at the same time. So I am wondering if there is a way to query how many sockets I can open?  <\/p>","email":"lamer2000@hotmail.com","url":null},{"i":"44aac9bf-400c-4449-2075-4aac9bfa772b","d":"2006-07-04 20:04:15","u":"anon","n":"Kaolin Fire -- harvesterspam_5570@erif.org","c":"<b>quick fix?<\/b><br\/>\n<p>I altered the following two areas to make the above code work for me:   <\/p>\n<pre class=\"phpcode\">$status = array();\n$sockets = array();\n$written = array();<\/pre><pre class=\"phpcode\">foreach ($write as $w) {\n            $id = array_search($w, $sockets);\n            $string = \"HEAD \/ HTTP\/1.0\\\\r\\\\nHost: \" . $hosts[$id] .  \"\\\\r\\\\n\\\\r\\\\n\";\n            if (strlen($string) == $written[$id]) continue;\n            $substr = substr($string,$written[$id]);\n            $written[$id]+= fwrite($w, $substr);\n            $status[$id] = \"waiting for response\";\n        }<\/pre>","email":"Kaolin Fire -- harvesterspam_5570@erif.org","url":null},{"i":"c9b93f87-6724-4549-8ed2-08060808261f","d":"2009-03-12 12:59:51","u":"","n":"graham","c":"<b>Using curl?<\/b><br\/>\n<p>Is there any way to do this using curl? My host doesn&#039;t allow me to use fopen.<\/p>\n<p>Thanks in advance<\/p>\n<p>Graham<\/p>","email":"graham","url":null},{"i":"4a2e5a05-f954-4d58-bf3e-18d80808261f","d":"2009-06-09 08:48:05","u":"","n":"Simon","c":"<b>using file_get_contents<\/b><br\/>\n<p>Hi Wez<\/p>\n<p>Instead of collection the returned data (POST) in junks from fread, is it possible to use file_get_contents on the open streams, but still have the advantage of asynchronous (e.g. non-sequential) responses or would that block the other open sockets?<\/p>","email":"Simon","url":null},{"i":"ca2ef3c7-34ac-47df-98f6-1ebe0808261f","d":"2009-06-09 19:44:07","u":"http:\/\/netevil.org\/","n":"wezfurlong","c":"<b>X_get_contents would block<\/b><br\/>\n<p>You can certainly use file_get_contents() (or more useful, stream_get_contents()) but that would work against the point of the article, which is to not block if you can help it.<\/p>\n<p>If you&#039;re interested in a fairly complex example of multiplexing IO in PHP, check out my CouchShare project on BitBucket:<\/p>\n<p class=\"url\"><a href=\"http:\/\/bitbucket.org\/wez\/couchshare\/overview\/\">http:\/\/bitbucket.org\/wez\/couchshare\/overview\/<\/a><\/p>\n<p><\/p>","email":"wez@netevil.org","url":"http:\/\/netevil.org"}]